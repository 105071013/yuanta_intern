---
title: "<center>統計學習 HW1<center>>"
author: "<p align='right'>105071013 陳冠維</p>>"
output:
  html_document: default
  pdf_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**8.**

**(a)**
```{r, echo=FALSE}
college <- read.csv('./College.csv')
head(college)
```

使用read.csv() function 讀取檔案，並命名為college

**(b)**
```{r eval=FALSE, include=FALSE}
fix(college) # look at the data (b)
rownames(college) <- college[, 1] #將row names 改為大學名稱
fix(college)
college <- college[, -1] #從第二行開始,the first data col is 'Private'
fix(college) # row.names is not data cols
```

![](./pic/1.png)
上圖為原始資料檔，可以看到第一欄為各大學之名稱
![](./pic/2.png)
上圖顯示我們將row names改為大學名稱
![](./pic/3.png)
在刪除掉第一欄的大學名稱後，第一欄變為"Private"

**(c)**

**i.**
```{r, echo=FALSE}
#1
summary(college)
```

"Private"為類別資料，顯示了Yes,No的總數

其餘則計算出各個特徵值的最小值、最大值、中位數、平均數、第1、第3四分位數

**ii.**
```{r, echo=FALSE}
#2
pairs(college[, 1:10]) # produce scatterpot matrix
```

運用pairs() function 產生前10個特徵值兩兩互相對應的scatterplot

從圖中可以肉眼看出不少特徵值兩兩間有著線性相關

**iii.**
```{r, echo=FALSE}
#3
boxplot(college$Outstate ~ college$Private,
        xlab = 'Private',
        ylab = 'Outstate',
        main = 'Boxplots of Outstate versus Private') #boxplot
```

結果顯示私立大學的學費比公立大學的學費高，且私立大學的平均學費也幾乎大於所有公立大學的學費

**iv.**
```{r, echo=FALSE}
#4
Elite <- rep("No", nrow(college)) #重複"No" 777次
# whether or not the proportion of students coming from the top 10 % of their high school classes exceeds 50 %
Elite[college$Top10perc > 50] = "Yes"
Elite <- as.factor(Elite) # 轉為factor(類別變數)
college <- data.frame(college, Elite)
summary(college$Elite) # Yes -> 78
```

結果顯示只有78所大學屬於菁英
(the proportion of students coming from the top 10 % of their high school classes exceeds 50 %)

```{r, echo=FALSE}
boxplot(college$Outstate ~ college$Elite,
        xlab = 'Elite',
        ylab = 'Outstate',
        main = 'Boxplots of Outstate versus Elite') #boxplot
```

可以看到與前一題公私立學校與學費的boxplot相比，屬於菁英的大學的平均學費又更高於私立大學的平均學費

而屬於菁英大學的平均學費也高於不屬於菁英大學的平均學費

**v.**
```{r, echo=FALSE}
#5
par(mfrow=c(2,2)) # 一次可以放4個plots
hist(college$Apps, 
     breaks = 20,
     xlab = "Number of applications received",
     col = 1)
hist(college$PhD, 
     breaks = 20,
     xlab = "Percent of faculty with Ph.D.",
     col = 3)
hist(college$Books, 
     breaks = 20,
     xlab = "Estimated book costs",
     col = 2)
hist(college$Grad.Rate,
     breaks = 20,
     xlab = "Graduation rate",
     col = 4)
```

**(1)** 左上角的直方圖顯示大部分的大學收到少於2500個申請，只有少部分的大學收到高於10000個申請

**(2)** 右上角的直方圖顯示大部分的大學有高於60%的學院有博士學位，並且可以發現大多數介於70%~90%

**(3)** 左下角的直方圖顯示大多數的估計書本花費介於300~700

**(4)** 右下角的直方圖顯示大部分大學的畢業率介於50%~80%之間

**vi.**
```{r, echo=FALSE, fig.height = 10, fig.width = 5, fig.align = "center"}
par(mfrow=c(2,1))
plot(college$Top10perc, college$Grad.Rate,
     pch = 1,
     cex = 1,
     xlab = 'Top 10% in high school',
     ylab = 'Graduation Rate',
     main = 'Grads rate versus Top 10%',
     ylim=c(0,150))
# It provides that the more the top 10% of high school class students the college has does not always provide higher graduation rate.
plot(college$Grad.Rate, college$Outstate,
     pch = 1,
     cex = 1,
     xlab = 'Graduation Rate',
     ylab = 'Out-of-state tuition',
     main = 'Grads rate versus Tuition')
# It provides that high out-of-state tuition correlates to high graduration rate.
```

從上圖可以發現，擁有較多高中時屬於前10%的學生的大學並不一定有較高的畢業率

從下圖可以發現，畢業率與學費有著正相關性

```{r, echo=FALSE}
summary(college$Grad.Rate)
# The max graduation rate is 118%, it might be wrong because graduation rate should not exceed 100%.
```

可以發現到最高的畢業率為118%，這之中可能出現了資料的收集錯誤，因為理論上畢業率不應該超過100%

**10.**

**(a)**
```{r, echo=FALSE, warning=FALSE}
library(MASS)
```

```{r, eval=FALSE, echo=FALSE}
Boston
?Boston
nrow(Boston)
ncol(Boston)
dim(Boston)
```

此資料集總共有506列14行，506列代表著總共有506筆樣本數，而14行代表著總共有14個特徵值

下方為14個特徵值的名稱

```{r, echo=FALSE}
colnames(Boston)
```

**(b)**
```{r, echo=FALSE, fig.align = "center"}
pairs(Boston)
```

從這些圖中，我發現了以下幾點：

**(1)**非零售業的比例與氮氧化物濃度呈正相關，但與'weighted mean of distances to five Boston employment centres'成負相關。前者呈正相關非常直觀，非零售業比例(可能是工業區)有著較高的廢氣；而後者代表非零售業較接近波士頓的就業中心。
       
**(2)**氮氧化物濃度與1940年前蓋的房屋比例呈正相關，而與'weighted mean of distances to five Boston employment centres'呈負相關。前者較沒辦法直觀的看出關聯，而後者可以與**(1)**合併一起看。氮氧化物濃度(有害氣體)愈高，離工業區愈近，同樣的也離波士頓就業中心愈近。

**(3)**每棟住宅的平均房間數與房價的中位數呈正相關。這點也非常直觀，平均房數愈多，房價自然也會較貴。

**(4)**1940年前蓋的房屋比例與'weighted mean of distances to five Boston employment呈負相關。可見舊房子的比例愈高，離波士頓就業中心近。

**(5)**低階人口的比例與房價的中位數呈負相關，這代表著低階人口愈少，房價就愈高，非常符合常理。

**(c)**
```{r, echo=FALSE, fig.height = 10, fig.width = 5, fig.align = "center"}
# (c)
par(mfrow=c(2,1))
plot(Boston$age, Boston$crim,
     xlab = 'proportion of owner-occupied units built prior to 1940',
     ylab = 'per capita crime rate by town')
# 房屋越老舊，犯罪率有越高的趨勢
plot(Boston$tax, Boston$crim,
     xlab = 'full-value property-tax rate',
     ylab = 'per capita crime rate by town')
# 不少稅金處在600~700之間，而所有高犯罪率也在這個區間之內發生。
```

從上圖中可以看到，房屋越老舊，犯罪率有越高的趨勢。

從下圖中可以發現，不少稅金處在600~700(較高的稅金)之間，而所有高犯罪率也在這個區間之內發生。

**(d)**
```{r, echo=FALSE}
pct <- quantile(Boston$crim)[4]
mean(Boston$crim >= pct)
hist(Boston$crim,
     breaks = 20,
     xlab = "per capita crime rate by town")
mean(Boston$crim >= 20)
```

第3四分位數之犯罪率為3.68%，有25.09881%的城市處於這個犯罪率之上。再者由直方圖可見，大部分的城市都屬於低犯罪率，而只有少部分城市犯罪率特別高。其中犯罪率高於20%的城市占了3.557312%。


```{r, echo=FALSE}
hist(Boston$tax,
     breaks = 20,
     xlab = "full-value property-tax rate")
mean(Boston$tax >= 600)
```

從直方圖可以發現，有部分城市的稅收在600~700之間，相較其他城市屬於特別高的部分，其中佔的比率為27.0751%。

```{r, echo=FALSE}
hist(Boston$ptratio,
     breaks = 20,
     xlab = "pupil-teacher ratio by town")
range(Boston$ptratio)
```

可以從直方圖與最大(22%)、最小值(12.6%)發現，'pupil-teacher ratio'並無特別大的值，大部分處於14%~22%之間。

**(e)**
```{r, echo=FALSE}
sum(Boston$chas)
```

共有35座城市以河為界

**(f)**
```{r, echo=FALSE}
median(Boston$ptratio)
# The median pupil-teacher ratio is 19.05
```

'median pupil-teacher ratio'的中位數是19.05

**(g)**
```{r, echo=FALSE}
subset(Boston, medv == min(Boston$medv))
summary(Boston)
```

Sample 399 and 406 suburbs has lowest median value of owner-occupied homes.

與其他城市作比較後發現以下幾點：

**(1)** 這兩個城市的犯罪率皆遠高於第3四分位數，犯罪率偏高。

**(2)** 這兩個城市的'zn'為0，屬於最小值

**(3)** 這兩個城市的'indus'皆為18.1，正好在第3四分位數。

**(4)** 這兩個城市皆非'bound by river'

**(5)** 這兩個城市的'nox'皆超過第3四分位數

**(6)** 這兩個城市的'rm'皆低於第1四分位數

**(7)** 這兩個城市的房屋老舊程度皆為最大值

**(8)** 這兩個城市的'dis'皆低於第1四分位數

**(9)** 這兩個城市的'rad'皆為最大值

**(10)** 這兩個城市的稅收皆剛好在第3四分位數

**(11)** 這兩個城市的'ptratio'皆剛好在第3四分位數

**(12)** 399_suburb 的'black'為最大值；406_suburb 的'black'則大於第1四分位數

**(13)** 這兩個城市的'lstat'皆大於第3四分位數

**(14)** 這兩個城市的'medv'皆為最小值

**(h)**
```{r, echo=FALSE}
sum(Boston$rm > 7)
# 64 suburbs average more than 7 rooms per dwelling
sum(Boston$rm > 8)
# 13 suburbs average more than 8 rooms per dwelling
```

共64座城市平均每棟房屋超過7間房間

共13座城市平均每棟房屋超過8間房間

```{r, echo=FALSE}
summary(subset(Boston, rm > 8))
summary(Boston)
# 相互比較之後可以從中發現，平均房間數大於8間的城市有較低的犯罪率(crim)以及較少的相對低階人口(lstat)
```

與其他城市相互比較後發現，平均房間數大於8間的城市有較低的犯罪率(crim)以及較少的相對低階人口(lstat)。可以說這些城市有較好的生活品質，也較適合居住。